import qrcode
from PIL import Image, ImageDraw, ImageFont

nis = "masukkan nis"
nama = "masukkan nama"
kelas = "masukkan kelas"
data_qr = f"{nis}|{nama}|{kelas}"

qr_img = qrcode.make(data_qr)
qr_img = qr_img.convert("RGB")

font_size = 20
try:
    font = ImageFont.truetype("DejaVuSans.ttf", font_size)
except:
    font = ImageFont.load_default()

w_img, h_img = qr_img.size
padding = 10
label_h = font_size + padding

new_img = Image.new("RGB", (w_img, h_img + label_h), "white")
new_img.paste(qr_img, (0, 0))
draw = ImageDraw.Draw(new_img)
text_w, text_h = draw.textsize(nama, font=font)
draw.text(((w_img - text_w) // 2, h_img + padding // 2), nama, fill="black", font=font)
new_img.save("QR_Sma_Tamanan.png")

print("âœ… QR Code berhasil dibuat: QR_Sman_Tamanan.png")
